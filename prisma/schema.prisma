generator client {
  provider     = "prisma-client"
  output       = "../generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

model ChatMessage {
  id         Int       @id @default(autoincrement())
  chatRoomId Int       @map("chat_room_id")
  userId     Int       @map("user_id")
  content    String?
  createdAt  DateTime  @default(now()) @map("created_at")
  chatRoom   ChatRoom  @relation(fields: [chatRoomId], references: [id], onDelete: Cascade)
  user       User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("chat_messages")
}

model ChatRoom {
  id           Int           @id @default(autoincrement())
  userId       Int           @map("user_id")
  createdAt    DateTime      @default(now()) @map("created_at")
  chatMessages ChatMessage[]
  user         User          @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("chat_room")
}

model User {
  id              Int           @id @default(autoincrement())
  providerId      String        @unique
  providerIdEmail String?       @unique @map("providerId_email")
  name            String?
  profileImageUrl String?       @map("profile_image_url")
  createdAt       DateTime      @default(now()) @map("created_at")
  updatedAt       DateTime      @updatedAt @map("updated_at")
  chatMessages    ChatMessage[]
  chatRooms       ChatRoom[]

  @@map("users")
}
